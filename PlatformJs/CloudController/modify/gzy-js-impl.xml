<project name="kele-js-impl">
    <target name="-build-webos-js">
        <x-compile refid="${compiler.ref.id}">
        <![CDATA[
            restore
            page
            and
            include
            -namespace=${kele.modules.site.namespace}
            -r
            and
            include
            -namespace=${kele.modules.sys.namespace}
            -r
            and
            include
            -namespace=${kele.modules.daemons.namespace}
            -r
            and
            include
            -file=${webos.bootstrap.requires.package.js}
            and
            save
            page
            and
            exclude
            -all
            and
            include
            -tag=package-sencha-core,framework
            and
            save
            allframework
            and
            intersect
            -set=page,allframework
            and
            save
            frameworkdeps


            and
            include
            -file=${kele.entry.js}
            -r
            and
            ${build.optimize}
            and
            concat
            -remove-text-references=${build.remove.references}
            -optimize-string-references=${build.optimize.string.references}
            -remove-requirement-nodes=${build.remove.requirement.nodes}
            ${build.compression}
            -out=${webos.output.file}
            ${build.concat.options}
            ]]>
        </x-compile>
    </target>
    <target name="-build-modules-js">
        <x-compile refid="${compiler.ref.id}">
            <![CDATA[
            exclude
            -all
            and
            include
            -namespace=${kele.modules.site.namespace}
            and
            ${build.optimize}
            and
            concat
            -remove-text-references=${build.remove.references}
            -optimize-string-references=${build.optimize.string.references}
            -remove-requirement-nodes=${build.remove.requirement.nodes}
            ${build.compression}
            -out=${kele.modules.site.file}
            ${build.concat.options}
            ]]>
        </x-compile>
        <x-compile refid="${compiler.ref.id}">
            <![CDATA[
            exclude
            -all
            and
            include
            -namespace=${kele.modules.sys.namespace}
            and
            ${build.optimize}
            and
            concat
            -b
            -remove-text-references=${build.remove.references}
            -optimize-string-references=${build.optimize.string.references}
            -remove-requirement-nodes=${build.remove.requirement.nodes}
            ${build.compression}
            -out=${kele.modules.sys.file}
            ${build.concat.options}
            ]]>
        </x-compile>
        <x-compile refid="${compiler.ref.id}">
            <![CDATA[
            exclude
            -all
            and
            include
            -namespace=${kele.modules.daemons.namespace}
            and
            ${build.optimize}
            and
            concat
            -remove-text-references=${build.remove.references}
            -optimize-string-references=${build.optimize.string.references}
            -remove-requirement-nodes=${build.remove.requirement.nodes}
            ${build.compression}
            -out=${kele.modules.daemons.file}
            ${build.concat.options}
            ]]>
        </x-compile>
    </target>
</project>